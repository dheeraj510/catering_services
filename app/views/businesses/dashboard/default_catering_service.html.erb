<!-- tandemSelect jQuery plugin - html block start -->
<div class='tandem-select-container'>

  <!-- Source Div and Select Menu -->
  <div class='tandem-select-src-div'>
    All Items
    <select multiple='multiple' class='tandem-select-src-select'>
      <% @menu.each do |m| %>
          <option value="<%= m.id %>"><%= m.name %>(<%= m.item_type %>)-<%= m.price %></option>
      <% end %>

    </select>
  </div>

  <!-- Controls DIV, Buttons and Search box -->
  <div class='tandem-select-controls-div'>
    Controls
    <br/> <br/>

    <input type="button" class="tandem-select-move-to-src" value="&nbsp;&lt;&nbsp;" />
    &nbsp; &nbsp;
    <input type="button" class="tandem-select-move-to-dst" value="&nbsp;&gt;&nbsp;" />

    <br/> <br/>
    Search<br/>
    <input type="text" class="tandem-select-search-src" size="15"/>
  </div>

  <!-- Destination Div and Select Menu -->
  <div class='tandem-select-dst-div'>
    Selected Items List
    <select multiple='multiple' class='tandem-select-dst-select' id='selected-items' name='selected-menu'></select>
    <div id="no_of_items"></div>
    <div id="totalprice"></div>
    <button id = "finish">Finish</button>
  </div>

</div>
<div style="clear: both;"></div>
<!-- tandemSelect jQuery plugin - html block end -->


<script type="text/javascript">
    $(document).ready(function () {
        $('#selected-items').tandemSelect();

    });
</script>
<script>
    $('.tandem-select-move-to-dst, .tandem-select-move-to-src ').click(function(){
        setTimeout(function() {
            var item_value = [] ;
            var items = 0
            $("#selected-items>option").each(function(){
                item_value.push($(this).val());
                items ++
            }) ;

            $.post("/menuprice",{ id:item_value } ,function(data) {
                if(data=='false') { //if price not avaiable
                    $("#totalprice").fadeTo(200,0.1,function() { //start fading the messagebox
                        $(this).html('No Price').addClass('messageboxerror').fadeTo(900,1);
                    });
                }else{
                    $("#no_of_items").fadeTo(200,0.1,function() { //start fading the messagebox
                        $(this).html('Total selected Items: ' + items).fadeTo(900,1);
                    });
                    $("#totalprice").fadeTo(200,0.1,function() { //start fading the messagebox
                        $(this).html('Total Price: ' + data).addClass('messageboxerror').fadeTo(900,1);
                    });
                }
            });

        }, 100);

    });

</script>