<% if user_signed_in? || business_signed_in? %>
    <ul class="nav pull-right">
      <% if user_signed_in? %>
          <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, <%= current_user.name %> <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><%= link_to " Dashboard", users_dashboard_index_path ,:class=>"icon-list-alt" %></li>
              <li><%= link_to " History", "#" ,:class=>"icon-time" %></li>
              <li><%= link_to " Edit Profile", edit_user_registration_path(current_user) ,:class=>"icon-user" %></li>
              <li></li>
              <li class="divider"></li>
              <li> <%= link_to " Logout", destroy_user_session_path, :method => :delete,  :class=>"icon-off" %></li>
            </ul>
          </li>
      <% elsif business_signed_in? %>
          <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, <%= current_business.name %> <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><%= link_to " Dashboard", businesses_dashboard_index_path ,:class=>"icon-list-alt" %></li>
              <li><%= link_to " History", "#" ,:class=>"icon-time" %></li>
              <li><%= link_to " Edit Profile", "#" ,:class=>"icon-user" %></li>
              <li></li>
              <li class="divider"></li>
              <li> <%= link_to " Logout", destroy_business_session_path, :method => :delete,  :class=>"icon-off" %></li>
            </ul>
          </li>
      <% end %>
    </ul>
<% else %>

    <!--using osx.css and jquery.simplemodel.js -->

    <div id='content'>
      <div id='osx-modal'>
        <a class="osx btn btn-primary" >Login</a>
      </div>

      <!-- modal content -->
      <div id="osx-modal-content">
        <div id="osx-modal-title">Login to CateringServicesOnline.in</div>
        <div class="close"><a href="#" class="simplemodal-close">x</a></div>
        <div id="osx-modal-data">
          <div class="tabbable"> <!-- Only required for left/right tabs -->
            <ul class="nav nav-tabs">
              <li class="active"><a href="#tab1" data-toggle="tab">User</a></li>
              <li><a href="#tab2" data-toggle="tab">Business</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="tab1">
                <%= render '/layouts/shared/user' %>
              </div>
              <div class="tab-pane" id="tab2">
                <%= render '/layouts/shared/business' %>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>


<% end %>

<script>

    jQuery(function ($) {
        var OSX = {
            container: null,
            init: function () {
                $("input.osx, a.osx").click(function (e) {
                    e.preventDefault();

                    $("#osx-modal-content").modal({
                        overlayId: 'osx-overlay',
                        containerId: 'osx-container',
                        closeHTML: null,
                        minHeight: 80,
                        opacity: 65,
                        position: ['0',],
                        overlayClose: true,
                        onOpen: OSX.open,
                        onClose: OSX.close
                    });
                });
            },
            open: function (d) {
                var self = this;
                self.container = d.container[0];
                d.overlay.fadeIn('slow', function () {
                    $("#osx-modal-content", self.container).show();
                    var title = $("#osx-modal-title", self.container);
                    title.show();
                    d.container.slideDown('slow', function () {
                        setTimeout(function () {
                            var h = $("#osx-modal-data", self.container).height()
                                    + title.height()
                                    + 20; // padding
                            d.container.animate(
                                    {height: h},
                                    200,
                                    function () {
                                        $("div.close", self.container).show();
                                        $("#osx-modal-data", self.container).show();
                                    }
                            );
                        }, 300);
                    });
                })
            },
            close: function (d) {
                var self = this; // this = SimpleModal object
                d.container.animate(
                        {top:"-" + (d.container.height() + 20)},
                        500,
                        function () {
                            self.close(); // or $.modal.close();
                        }
                );
            }
        };

        OSX.init();

    });
</script>